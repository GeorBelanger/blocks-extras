#!/usr/bin/env python
import sys
import subprocess

controller = subprocess.Popen(
    ['python', '-m', 'blocks_extras.extensions.synchronization'])

workers = []
for i in range(int(sys.argv[1])):
    workers.append(subprocess.Popen(sys.argv[2:]))
for worker in workers:
    worker.wait()
controller.wait()
